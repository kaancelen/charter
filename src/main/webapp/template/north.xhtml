<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
      
      <ui:composition>
      	<h:form id="northForm">
      		<p:commandButton value="Dosya Yükle" update=":uploadFileForm" oncomplete="PF('uploadFile').show()"/>
      		<p:outputLabel value="Yüklü Dosya : #{mainController.consolidated.filename}, yüklenme Tarihi :" style="margin-left:20px;"/>
      		<p:outputLabel value="#{mainController.consolidated.uploadedDate}">
      			<f:convertDateTime pattern="dd/MM/yy HH:mm"/>
      		</p:outputLabel>
      		<p:commandButton value="Çizdir" icon="ui-icon-pencil" action="#{mainController.drawCharts}" update=":chartDlgForm" oncomplete="PF('chartDlg').show()"
      			disabled="#{empty mainController.consolidated.filepath}"/>
      	</h:form>
      	<!-- DIALOGSS -->
      	<p:dialog widgetVar="uploadFile" modal="true" appendTo="@(body)" resizable="false" draggable="false"
      		header="Dosya yükle">
      		<h:form id="uploadFileForm">
      			<p:messages id="messages" autoUpdate="true"/>
      			<p:outputLabel value="Önce dosyayı seçin daha sonra yükle butonu ile yükleyin." style="color:blue;"/>
				<br/>
				<p:outputLabel value="İzinli dosya uzantıları : (xls/x)" style="color:red;"/>
				<br/>
				<p:outputLabel value="Max. dosya boyutu 10mb" style="color:red;"/>
				<br/>
      			<p:fileUpload mode="advanced" dragDropSupport="false" sizeLimit="10000000" allowTypes="/(\.|\/)(xls|xlsx)$/"
      				fileUploadListener="#{mainController.onUploadFile}"	update=":northForm"
					label="Seciniz.." uploadLabel="Yukle" cancelLabel="Iptal" invalidSizeMessage="En fazla 10mb dosya yüklenebilir!"/>
      			<br/>
      			<p:commandButton value="Tamamla" icon="ui-icon-check" oncomplete="PF('uploadFile').hide()" update=":indexForm :northForm"
      				action="#{mainController.onCompleteFileUpload}"/>
      		</h:form>
      	</p:dialog>
      	<!-- Charts dialog -->
      	<p:dialog widgetVar="chartDlg" modal="true" appendTo="@(body)" resizable="false" draggable="false" header="Grafikler">
      		<h:form id="chartDlgForm">
      			<p:tabView>
      				<p:tab title="1">
      					<p:chart type="bar" model="#{mainController.nakitRisk}" style="height:500px;width:800px;"/>
      				</p:tab>
      				<p:tab title="2">
      					<p:chart type="bar" model="#{mainController.limitRisk}" style="height:500px;width:800px;"/>
      				</p:tab>
      				<p:tab title="3">
      				</p:tab>
      				<p:tab title="4">
      				</p:tab>
      				<p:tab title="5">
      				</p:tab>
      				<p:tab title="6">
      				</p:tab>
      				<p:tab title="7">
      				</p:tab>
      			</p:tabView>
      		</h:form>
      	</p:dialog>
      </ui:composition>
</html>